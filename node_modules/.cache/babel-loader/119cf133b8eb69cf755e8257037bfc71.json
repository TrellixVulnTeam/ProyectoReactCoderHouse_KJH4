{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Flavio\\\\Desktop\\\\React Proyect\\\\Magios-Team-Coder\\\\src\\\\context\\\\context.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useContext, useState, createContext, useEffect } from \"react\";\nimport firebase from \"firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const useCartContext = () => {\n  _s();\n\n  return useContext(CartContext);\n};\n\n_s(useCartContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nconst CartProvider = ({\n  children\n}) => {\n  _s2();\n\n  const [cart, setCart] = useState([]);\n  const [totalQty, setTotalQty] = useState(0);\n  const [precioTotal, setPrecioTotal] = useState(0);\n  const [userName, setUserName] = useState(\"\");\n  useEffect(() => {\n    if (localStorage.getItem(\"Carrito Magios\")) setCart(JSON.parse(localStorage.getItem(\"Carrito Magios\")));\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(\"Carrito Magios\", JSON.stringify(cart));\n    let qty = 0;\n    let price = 0;\n    cart.map(item => (setTotalQty(qty += item.cantidad), setPrecioTotal(price += item.cantidad * item.item.precio)));\n  }, [cart]);\n\n  const addToCart = (item, qty) => {\n    const repeated = cart.findIndex(product => product.item.id === item.item.id);\n    setTotalQty(totalQty + qty);\n\n    if (repeated !== -1) {\n      const newArray = Array.from(cart);\n      cart[repeated].cantidad += item.cantidad;\n      setCart(newArray);\n    } else {\n      setCart([...cart, item]);\n      setPrecioTotal(precioTotal + item.cantidad * item.item.precio);\n    }\n  };\n\n  const removeItem = (id, precio, qty) => {\n    const arrayAfterDelete = cart.filter(product => product.item.id !== id);\n    setCart(arrayAfterDelete);\n    setTotalQty(totalQty - qty);\n    setPrecioTotal(precioTotal - precio);\n  };\n\n  const clearCart = () => {\n    setCart([]);\n    setTotalQty(0);\n    setPrecioTotal(0);\n  };\n\n  const googleProvider = new firebase.auth.GoogleAuthProvider();\n\n  const autenticacion = async () => {\n    const google = await firebase.auth().signInWithPopup(googleProvider);\n    setUserName(google.user.displayName);\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      totalQty,\n      precioTotal,\n      userName,\n      addToCart,\n      removeItem,\n      clearCart,\n      autenticacion\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 3\n  }, this);\n};\n\n_s2(CartProvider, \"teNk9YWLsE0tNyL9SVQ1iEZhijk=\");\n\n_c = CartProvider;\nexport default CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"sources":["C:/Users/Flavio/Desktop/React Proyect/Magios-Team-Coder/src/context/context.js"],"names":["useContext","useState","createContext","useEffect","firebase","CartContext","useCartContext","CartProvider","children","cart","setCart","totalQty","setTotalQty","precioTotal","setPrecioTotal","userName","setUserName","localStorage","getItem","JSON","parse","setItem","stringify","qty","price","map","item","cantidad","precio","addToCart","repeated","findIndex","product","id","newArray","Array","from","removeItem","arrayAfterDelete","filter","clearCart","googleProvider","auth","GoogleAuthProvider","autenticacion","google","signInWithPopup","user","displayName"],"mappings":"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","sourcesContent":["import { useContext, useState, createContext, useEffect } from \"react\";\nimport firebase from \"firebase\";\n\nexport const CartContext = createContext();\nexport const useCartContext = () => useContext(CartContext);\n\nconst CartProvider = ({ children }) => {\n\n\n\tconst [cart, setCart] = useState([]);\n\n\tconst [totalQty, setTotalQty] = useState(0);\n\n\tconst [precioTotal, setPrecioTotal] = useState(0);\n\n\tconst [userName, setUserName] = useState(\"\");\n\n\t\n\n\tuseEffect(() => {\n\t\tif (localStorage.getItem(\"Carrito Magios\")) (\n\t\t\tsetCart(JSON.parse(localStorage.getItem(\"Carrito Magios\")))\n        )\n\t}, []);\n\n\n\tuseEffect(() => {\n\t\tlocalStorage.setItem(\"Carrito Magios\", JSON.stringify(cart));\n\t\tlet qty = 0;\n\t\tlet price = 0;\n\t\tcart.map((item) => (\n            setTotalQty((qty += item.cantidad)),\n\t\t\tsetPrecioTotal((price += item.cantidad * item.item.precio))\n        ));\n\t}, [cart]);\n\n\n\tconst addToCart = (item, qty) => {\n\t\tconst repeated = cart.findIndex(\n\t\t\t(product) => product.item.id === item.item.id\n\t\t);\n\n\t\tsetTotalQty(totalQty + qty);\n\n\t\tif (repeated !== -1) {\n\t\t\tconst newArray = Array.from(cart);\n\t\t\tcart[repeated].cantidad += item.cantidad;\n\t\t\tsetCart(newArray);\n\t\t} else {\n\t\t\tsetCart([...cart, item]);\n\t\t\tsetPrecioTotal(precioTotal + item.cantidad * item.item.precio);\n\t\t}\n\t};\n\n\tconst removeItem = (id, precio, qty) => {\n\t\tconst arrayAfterDelete = cart.filter((product) => product.item.id !== id);\n\n\t\tsetCart(arrayAfterDelete);\n\n\t\tsetTotalQty(totalQty - qty);\n\n\t\tsetPrecioTotal(precioTotal - precio);\n\t};\n\n\tconst clearCart = () => {\n\t\tsetCart([]);\n\t\tsetTotalQty(0);\n\t\tsetPrecioTotal(0);\n\t};\n\n\tconst googleProvider = new firebase.auth.GoogleAuthProvider();\n\n\tconst autenticacion = async () => {\n\t\tconst google = await firebase.auth().signInWithPopup(googleProvider);\n\t\tsetUserName(google.user.displayName);\n\t};\n\n\t\n\n\treturn (\n\t\t<CartContext.Provider\n\t\t\tvalue={{\n\t\t\t\tcart,\n\t\t\t\ttotalQty,\n\t\t\t\tprecioTotal,\n\t\t\t\tuserName,\n\t\t\t\taddToCart,\n\t\t\t\tremoveItem,\n\t\t\t\tclearCart,\n\t\t\t\tautenticacion,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</CartContext.Provider>\n\t);\n};\n\nexport default CartProvider;\n"]},"metadata":{},"sourceType":"module"}